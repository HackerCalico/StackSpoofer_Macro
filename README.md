# StackSpoofer_Macro

### è¯·ç»™æˆ‘ Star ðŸŒŸï¼Œéžå¸¸æ„Ÿè°¢ï¼è¿™å¯¹æˆ‘å¾ˆé‡è¦ï¼

### Please give me Star ðŸŒŸ, thank you very much! It is very important to me!

### 1. ä»‹ç»

ç»è¿‡æ”¹é€ çš„æ ˆæ¬ºéª—æŠ€æœ¯ï¼Œæ˜“äºŽä½¿ç”¨ä¸”åŠŸèƒ½å¼ºå¤§ã€‚

https://github.com/HackerCalico/StackSpoofer_Macro

![spoof.jpg](https://raw.githubusercontent.com/HackerCalico/StackSpoofer_Macro/refs/heads/main/spoof.png)

### 2. æ•ˆæžœ & ä¼˜åŠ¿

(1) é€šè¿‡ SPOOF(å‡½æ•°å, å‚æ•°...) å®å¯ä»¥ç®€å•å¯¹ä»»æ„å‡½æ•°è¿›è¡Œæ ˆæ¬ºéª—è°ƒç”¨ã€‚

(2) ä»Žçº¿ç¨‹çš„æ ˆç©ºé—´ä¸­å¯»æ‰¾ BaseThreadInitThunk å’Œ RtlUserThreadStart çš„æ ˆå¸§ï¼Œé¿å…äº†ä¸åŒ Windows ç‰ˆæœ¬çš„å‡½æ•°æœ‰å·®å¼‚çš„é—®é¢˜ã€‚

(3) é€šè¿‡è‡ªå®šä¹‰ DLL å®žçŽ° Gadgetï¼Œé¿å…äº† Gadget å½¢å¼å›ºå®šå’Œè¿”å›žä½ç½®ä¸å­˜åœ¨ call çš„ç‰¹å¾ã€‚

(4) é€šè¿‡ OBF("xxx") å®å¯ä»¥ç®€å•å¯¹ä»»æ„å­—ç¬¦ä¸²è¿›è¡Œç¼–è¯‘æ—¶åŠ å¯†ï¼Œè¿è¡Œæ—¶è§£å¯†ã€‚

### 3. æ³¨æ„äº‹é¡¹

(1) SPOOF å®çš„å‚æ•°ä¸­ä¸èƒ½å­˜åœ¨å‡½æ•°è°ƒç”¨ï¼Œä¾‹å¦‚ SPOOF(func1, func2())ã€‚

(2) æ ˆæ¬ºéª—è°ƒç”¨çš„å‡½æ•°çš„å‚æ•°æ€»å¤§å°ä¸èƒ½è¶…è¿‡ MinGadgetStackSizeï¼Œè¿™ä¸ªå€¼å¯ä»¥ç»“åˆ DLL éšæ„æ”¹å˜ï¼Œé»˜è®¤æ˜¯ 200 bitã€‚

(3) Visual Studio Installer ---> å•ä¸ªç»„ä»¶ ---> LLVM (clang-cl) å’Œ Clang ---> å®‰è£…